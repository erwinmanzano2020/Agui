/* --- Tailwind v4 core --- */
@import "tailwindcss";

/* --- Design tokens (colors, light/dark, runtime) --- */
@import "../styles/tokens.css";

/* --- Structural foundations (radius, shadows, print) --- */
@import "../styles/foundations.css";

/* --- Launcher tile styles --- */
@import "../styles/launcher.css";

/* --- Map variables to Tailwind tokens via @theme (v4 way) --- */
@theme {
  /* Colors */
  --color-brand: var(--accent);
  --color-brand-foreground: var(--accent-contrast);

  --color-background: var(--surface);
  --color-foreground: var(--text);

  --color-muted: color-mix(in srgb, var(--surface) 78%, var(--text) 22%);
  --color-muted-foreground: var(--muted);

  --color-card: var(--card);
  --color-card-foreground: var(--text);

  --color-border: var(--border);
  --color-input: var(--border);
  --color-ring: var(--ring);

  --color-success: var(--success);
  --color-warning: var(--warning);
  --color-danger: var(--danger);

  /* Radii */
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
  --radius-2xl: var(--radius-2xl);

  /* Container width */
  --container-2xl: 1200px;
}

:root {
  --success: #16a34a;
  --success-foreground: #ecfdf5;
  --warning: #f59e0b;
  --warning-foreground: #422006;
  --danger: #ef4444;
  --danger-foreground: #ffffff;

  --agui-primary: var(--accent);
  --agui-accent: var(--accent);
  --agui-ring: var(--ring);
  --agui-radius: 12px;

  --agui-on-primary: var(--accent-contrast);
  --agui-on-surface: var(--text);
  --agui-on-accent: var(--accent-contrast);

  --agui-card: var(--card);
  --agui-card-border: var(--border);
  --agui-card-foreground: var(--text);

  --agui-surface: var(--surface);
  --agui-surface-elevated: color-mix(in srgb, var(--card) 96%, #000000 4%);
  --agui-surface-border: var(--border);
  --agui-muted-foreground: var(--muted);
}

:root[data-shape="rounded"],
:root:not([data-shape]) {
  --agui-radius: 12px;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.25rem;
}

:root[data-shape="circle"] {
  --agui-radius: 999px;
  --radius-lg: 999px;
  --radius-xl: 999px;
  --radius-2xl: 999px;
}

.dark,
[data-theme="dark"] {
  --agui-on-surface: var(--text);
  --agui-card: var(--card);
  --agui-card-border: color-mix(in srgb, var(--border) 85%, transparent);
  --agui-card-foreground: var(--text);
  --agui-surface: var(--surface);
  --agui-surface-elevated: color-mix(in srgb, var(--card) 92%, #ffffff 8%);
  --agui-surface-border: color-mix(in srgb, var(--border) 70%, transparent);
  --agui-muted-foreground: color-mix(in srgb, var(--muted) 85%, var(--text) 15%);
}

/* --- Base defaults using our tokens --- */
@layer base {
  html,
  body {
    background-color: var(--surface);
    color: var(--text);
    font-feature-settings: "liga" 1, "kern" 1;
    -webkit-font-smoothing: antialiased;
  }
  h1 { @apply text-2xl font-semibold; }
  h2 { @apply text-xl font-semibold; }
  a {
    color: var(--accent);
    text-decoration: none;
    text-underline-offset: 0.25em;
    transition: color 0.2s ease;
  }
  a:hover {
    text-decoration: underline;
  }
  :where(button) {
    outline: transparent;
    outline-offset: 2px;
  }
  :where(button):focus-visible {
    outline: 3px solid color-mix(in srgb, var(--ring) 65%, transparent);
  }
}

/* --- Utilities for shadows (custom, v4-safe) --- */
@layer utilities {
  .shadow-soft   { box-shadow: var(--shadow-soft); }
  .shadow-lifted { box-shadow: var(--shadow-lifted); }
}

/* --- Components --- */
@layer components {
  .card {
    background: var(--color-card);
    color: var(--color-card-foreground);
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-soft);
  }
  .launcher-dock-icon {
    color: currentColor;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .launcher-dock-icon > * {
    width: 1.75rem;
    height: 1.75rem;
    stroke-width: 1.5;
  }
  /* === Form primitives (refined) === */
  .field  { @apply space-y-1.5; }
  .label  { @apply text-sm font-medium; }
  .help   { @apply text-xs text-muted-foreground; }
  .error  { @apply text-xs text-danger; }

  /* Inputs: clear background, border, focus */
  .input,
  .select,
  .textarea {
    @apply w-full rounded-2xl px-3 py-2 outline-none
           bg-background
           border border-border
           placeholder:text-muted-foreground
           focus-visible:ring-2 focus-visible:ring-ring
           focus-visible:border-ring;
  }
  .checkbox { @apply h-4 w-4 rounded border border-border align-middle; }

  /* Two-column layout on desktop, stack on mobile */
  .form-row { @apply grid gap-2; grid-template-columns: 220px 1fr; }
  @media (max-width: 640px) { .form-row { grid-template-columns: 1fr; } }


  /* Base button */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 font-medium transition
           disabled:opacity-60 disabled:pointer-events-none;
    border-radius: var(--agui-radius);
    box-shadow: var(--shadow-soft);
    color: inherit;
  }

  /* Variants (use together with .btn) */
  .btn-primary {
    background: var(--agui-primary);
    color: var(--agui-on-primary);
  }
  .btn-primary:hover {
    box-shadow: var(--shadow-lifted);
    filter: brightness(0.95);
  }

  .btn-ghost {
    background: color-mix(in srgb, var(--agui-surface) 90%, var(--agui-on-surface) 10%);
    border: 1px solid
      color-mix(in srgb, var(--agui-surface-border) 60%, transparent);
    color: var(--agui-on-surface);
  }
  .btn-ghost:hover {
    background: color-mix(in srgb, var(--agui-surface) 82%, var(--agui-on-surface) 18%);
  }

  /* Centered container with padding and 2xl cap */
  .container-2xl {
    @apply mx-auto px-4;
    max-width: var(--container-2xl);
  }
}

/* Global focus ring */
*:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

