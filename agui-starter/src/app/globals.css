/* --- Tailwind v4 core --- */
@import "tailwindcss";

/* --- Our CSS variables (Step 1) --- */
@import "../styles/foundations.css";

/* --- Map variables to Tailwind tokens via @theme (v4 way) --- */
@theme {
  /* Colors */
  --color-brand: hsl(var(--brand));
  --color-brand-foreground: hsl(var(--brand-foreground));

  --color-background: hsl(var(--bg));
  --color-foreground: hsl(var(--fg));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --color-success: hsl(var(--success));
  --color-warning: hsl(var(--warning));
  --color-danger: hsl(var(--danger));

  /* Radii */
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
  --radius-2xl: var(--radius-2xl);

  /* Container width */
  --container-2xl: 1200px;
}

/* --- Base defaults using our tokens --- */
@layer base {
  html,
  body {
    background-color: var(--agui-surface);
    color: var(--agui-on-surface);
    font-feature-settings: "liga" 1, "kern" 1;
    -webkit-font-smoothing: antialiased;
  }
  h1 { @apply text-2xl font-semibold; }
  h2 { @apply text-xl font-semibold; }
  a {
    color: var(--agui-accent);
    text-decoration: none;
    text-underline-offset: 0.25em;
    transition: color 0.2s ease;
  }
  a:hover {
    text-decoration: underline;
  }
}

/* --- Utilities for shadows (custom, v4-safe) --- */
@layer utilities {
  .shadow-soft   { box-shadow: var(--shadow-soft); }
  .shadow-lifted { box-shadow: var(--shadow-lifted); }
}

/* --- Components --- */
@layer components {
  .card {
    background: var(--color-card);
    color: var(--color-card-foreground);
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-soft);  
  }
  /* === Form primitives (refined) === */
  .field  { @apply space-y-1.5; }
  .label  { @apply text-sm font-medium; }
  .help   { @apply text-xs text-muted-foreground; }
  .error  { @apply text-xs text-danger; }

  /* Inputs: clear background, border, focus */
  .input,
  .select,
  .textarea {
    @apply w-full rounded-2xl px-3 py-2 outline-none
           bg-background
           border border-border
           placeholder:text-muted-foreground
           focus-visible:ring-2 focus-visible:ring-ring
           focus-visible:border-ring;
  }
  .checkbox { @apply h-4 w-4 rounded border border-border align-middle; }

  /* Two-column layout on desktop, stack on mobile */
  .form-row { @apply grid gap-2; grid-template-columns: 220px 1fr; }
  @media (max-width: 640px) { .form-row { grid-template-columns: 1fr; } }


  /* Base button */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 font-medium transition
           disabled:opacity-60 disabled:pointer-events-none;
    border-radius: var(--agui-radius);
    box-shadow: var(--shadow-soft);
    color: inherit;
  }

  /* Variants (use together with .btn) */
  .btn-primary {
    background: var(--agui-primary);
    color: var(--agui-on-primary);
  }
  .btn-primary:hover {
    box-shadow: var(--shadow-lifted);
    filter: brightness(0.95);
  }

  .btn-ghost {
    background: color-mix(in srgb, var(--agui-surface) 90%, var(--agui-on-surface) 10%);
    border: 1px solid
      color-mix(in srgb, var(--agui-surface-border) 60%, transparent);
    color: var(--agui-on-surface);
  }
  .btn-ghost:hover {
    background: color-mix(in srgb, var(--agui-surface) 82%, var(--agui-on-surface) 18%);
  }

  /* Centered container with padding and 2xl cap */
  .container-2xl {
    @apply mx-auto px-4;
    max-width: var(--container-2xl);
  }
}

/* Global focus ring */
*:focus-visible {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

:root {
  --agui-primary: #3c7cae;
  --agui-surface: #0b0b0b;
  --agui-accent: #06b6d4;
  --agui-radius: 12px;
  --agui-on-primary: #f8fafc;
  --agui-on-surface: #f8fafc;
  --agui-on-accent: #022c36;
  --agui-card: #111827;
  --agui-card-border: rgba(255, 255, 255, 0.12);
  --agui-card-foreground: #f8fafc;
  --agui-surface-elevated: #141e2a;
  --agui-surface-border: rgba(255, 255, 255, 0.16);
  --agui-muted-foreground: #94a3b8;
}
